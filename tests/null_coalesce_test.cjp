<?php

echo "=== 空合并运算符测试 ===\n";

// 基本空合并运算符测试
$value1 = null ?? "默认值";
echo "null ?? '默认值' = " . $value1 . "\n";

$value2 = "非空值" ?? "默认值";
echo "'非空值' ?? '默认值' = " . $value2 . "\n";

// 变量测试
$var1 = null;
$result1 = $var1 ?? "变量为null时的默认值";
echo "\$var1 ?? '变量为null时的默认值' = " . $result1 . "\n";

$var2 = "有值";
$result2 = $var2 ?? "变量有值时的默认值";
echo "\$var2 ?? '变量有值时的默认值' = " . $result2 . "\n";

// 未定义变量测试
$result3 = $undefined_var ?? "未定义变量的默认值";
echo "\$undefined_var ?? '未定义变量的默认值' = " . $result3 . "\n";

// 数字测试
$num1 = 0;
$result4 = $num1 ?? 42;
echo "\$num1 ?? 42 = " . $result4 . "\n";

$num2 = null;
$result5 = $num2 ?? 42;
echo "\$num2 ?? 42 = " . $result5 . "\n";

// 字符串测试
$str1 = "";
$result6 = $str1 ?? "空字符串的默认值";
echo "\$str1 ?? '空字符串的默认值' = " . $result6 . "\n";

$str2 = null;
$result7 = $str2 ?? "null字符串的默认值";
echo "\$str2 ?? 'null字符串的默认值' = " . $result7 . "\n";

// 数组测试
$arr1 = [];
$result8 = $arr1 ?? "空数组的默认值";
echo "\$arr1 ?? '空数组的默认值' = " . $result8 . "\n";

$arr2 = null;
$result9 = $arr2 ?? "null数组的默认值";
echo "\$arr2 ?? 'null数组的默认值' = " . $result9 . "\n";

// 嵌套测试
$nested = null;
$result10 = $nested ?? ($another_undefined ?? "嵌套默认值");
echo "嵌套空合并运算符结果: " . $result10 . "\n";

// 复杂表达式测试
$a = 10;
$b = null;
$result11 = $b ?? $a;
echo "\$b ?? \$a = " . $result11 . "\n";

$result12 = $a ?? $b;
echo "\$a ?? \$b = " . $result12 . "\n";

echo "\n=== 空合并运算符测试完成 ===\n"; 